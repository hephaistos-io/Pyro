<div class="environment-creation-overlay">
  <h3 class="environment-creation-overlay__title">{{ title() }}</h3>

  <form (submit)="$event.preventDefault(); envNameInput.value && onConfirm(envNameInput.value, envDescInput.value)"
        class="environment-creation-overlay__form">
    <div class="form-group">
      <label class="form-label" for="envName">Environment Name</label>
      <input
        #envNameInput
        [disabled]="isSubmitting()"
        [value]="data().initialName ?? ''"
        autocomplete="off"
        class="form-input"
        id="envName"
        placeholder="e.g., Production, Staging, or Germany"
        required
        type="text">
    </div>
    <div class="form-group">
      <label class="form-label" for="envDesc">Description</label>
      <input
        #envDescInput
        [disabled]="isSubmitting()"
        [value]="data().initialDescription ?? ''"
        autocomplete="off"
        class="form-input"
        id="envDesc"
        placeholder="e.g., Live production environment"
        type="text">
    </div>

    @if (mode() === 'create') {
      <div class="form-group">
        <label class="form-label">Pricing Tier</label>
        <div class="tier-selector">
          @for (tier of tiers; track tier.value) {
            <button
              (click)="onTierChange(tier.value)"
              [class.tier-option--selected]="selectedTier() === tier.value"
              [disabled]="isSubmitting()"
              class="tier-option"
              type="button">
              <span class="tier-option__label">{{ tier.label }}</span>
              <span class="tier-option__price">{{ tier.price }}</span>
            </button>
          }
        </div>
      </div>
    }

    <div class="environment-creation-overlay__actions">
      <button
        (click)="onCancel()"
        [disabled]="isSubmitting()"
        class="btn btn--secondary"
        type="button">
        Cancel
      </button>
      <button
        [disabled]="isSubmitting()"
        class="btn btn--primary"
        type="submit">
        @if (isSubmitting()) {
          <span class="btn__spinner"></span>
          {{ submittingText() }}
        } @else {
          {{ submitButtonText() }}
        }
      </button>
    </div>
  </form>
</div>
